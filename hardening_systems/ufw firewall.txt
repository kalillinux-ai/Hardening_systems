why use ufw? 

simplicity and ease: ufw function is make a firewall accessible to everyone. it uses simple, human-readable commands 

reduced attack surface: by default, UFW typically operates on a secure "deny all incoming, allow all outgoing policy. this means your system automatically blocks all unsolicited connections from internet. 

rate limiting: includes features like rate limiting which
can help mitigate automated attacks, such as SSH brute-force attempts by blocking  an ip address that makes too many connection request in a short period.


1-install / check UFW 

sudo apt install -y ufw 

#quick status check

sudo ufw status verbose


2- set safe default policies

sudo ufw default deny incoming
sudo ufw default allow outgoing


explanation: Set default to deny incoming and allow outgoing (stateful connections are allowed automatically) UFW is stateful, so replies to outbound connections and established/related packets are allowed automatically.


3) Allow SSH (very important to do before enabling)

# allow OpenSSH (profile)

sudo ufw allow OpenSSH

# OR explicit port

sudo ufw allow 22/tcp

# safer: allow only your IP (replace YOUR_IP)

sudo ufw allow from YOUR_IP/32 to any port 22 proto tcp

# rate-limit SSH to reduce brute-force impact

sudo ufw limit OpenSSH


If you use a custom SSH port (e.g. 2222):

Allow the port first: sudo ufw allow 2222/tcp

Then edit "/etc/ssh/sshd_config " set Port 2222 and reload sshd: sudo systemctl restart sshd (only after UFW allows the new port).


4) Allow other required services

sudo ufw allow http      # port 80
sudo ufw allow https     # port 443

# or explicit
sudo ufw allow 1194/udp  # example: OpenVPN 


6) Useful status /manage /delete Rules 

# show numbered rules (useful to delete)

sudo ufw status numbered

# delete rule by number (example deleting rule #3)

sudo ufw delete 3

# reload UFW rules after manual edits (rarely needed)

sudo ufw reload

# disable temporarily

sudo ufw disable


7) Logging & monitoring

sudo ufw logging on            # enable logging (default 
level)

sudo ufw logging medium        # optionally set 

verbosity: low/medium/high/full


# check logs (Ubuntu)

sudo tail -F /var/log/ufw.log
sudo journalctl -u ufw -f 



Troubleshooting tips

If you get locked out: use console access, cloud-provider serial console, or the active SSH session (if still open) to disable ufw (sudo ufw disable).

If a rule seems duplicated, "sudo ufw status numbered" and delete the duplicate.

If a service isn't reachable, confirm the service is listening (ss -tuln) and the correct port is allowed in UFW.

